<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Конструктор квизов</title>
    {% include "metrika.html" %}
    {% block yandex_metrika %}{% endblock %}
    <link href="/static/bs/bootstrap.min.css" rel="stylesheet">
    <script src="/static/bs/bootstrap.min.js"></script>
    <script src="/static/allcss/kit.min.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        .goodlink:hover {
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="col-12">

            <h1 style="visibility: collapse">Создание квиза</h1>

            <nav class="navbar fixed-top bg-body-tertiary">
                <div class="container-fluid">
                    <a class="navbar-brand" href="/">КвоккаКвиз</a>
                </div>
            </nav>

            <div class="row g-3 mt-4">
                <div class="col-md-3">
                    <div class="d-flex flex-column flex-shrink-0 p-3 bg-body-tertiary rounded-3">
                        <a href="/constructor"
                           class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="currentColor"
                                 class="bi bi-box me-2" viewBox="0 0 16 16">
                                <path d="M6.5 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                                <path d="M4.5 0A2.5 2.5 0 0 0 2 2.5V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2.5A2.5 2.5 0 0 0 11.5 0zM3 2.5A1.5 1.5 0 0 1 4.5 1h7A1.5 1.5 0 0 1 13 2.5v10.795a4.2 4.2 0 0 0-.776-.492C11.392 12.387 10.063 12 8 12s-3.392.387-4.224.803a4.2 4.2 0 0 0-.776.492z"/>
                            </svg>
                            <span class="fs-4">Учительская</span>
                        </a>
                        <h6 class="mt-3">Ваш баланс: {{ user.coins }} TC</h6>
                        <hr>
                        <ul class="nav nav-pills flex-column mb-auto">
                            <li class="nav-item goodlink">
                                <a onclick="showMainMenu()" id="mainMenuLink" href="#" class="nav-link active"
                                   aria-current="page">
                                    <i class="fa-solid fa-house me-2 mb-1"></i>
                                    Главная
                                </a>
                            </li>
                            <li class="nav-item goodlink">
                                <a id="cardQuizLink" onclick="showCardQuiz()" class="nav-link link-body-emphasis "
                                   style="cursor: pointer">
                                    <i class="fa-solid fa-feather me-2 mb-1"></i>
                                    Квизы
                                </a>
                            </li>
                            <li class="nav-item goodlink">
                                <a onclick="showPricing()" id="pricingLink" href="#"
                                   class="nav-link link-body-emphasis "
                                   style="cursor: pointer">
                                    <i class="fa-solid fa-bag-shopping me-2 mb-1"></i>
                                    Покупки
                                </a>
                            </li>
                            <li class="nav-item goodlink">
                                <a onclick="showGroups()" id="groupsLink" href="#"
                                   class="nav-link link-body-emphasis "
                                   style="cursor: pointer">
                                    <i class="fa-solid fa-user-group me-2 mb-1"></i>
                                    Группы
                                </a>
                            </li>
                            <li class="nav-item goodlink">
                                <a onclick="showBox()" id="boxLink" href="#"
                                   class="nav-link link-body-emphasis "
                                   style="cursor: pointer">
                                    <i class="fa-solid fa-truck me-2 mb-1"></i>
                                    Коробка
                                </a>
                            </li>
                            <li class="nav-item goodlink">
                                <a id="cloudLink"
                                   href="https://cloud.quokkaquiz.ru/login?email={{ user.mail }}&password={{ user.password }}"
                                   target="_blank" class="nav-link link-body-emphasis" style="cursor: pointer">
                                    <i class="fa-solid fa-cloud me-2 mb-1"></i>
                                    Облако
                                </a>
                            </li>
                            <li class="nav-item goodlink">
                                <a id="tutorialLink" href="#" class="nav-link link-body-emphasis "
                                   style="cursor: pointer">
                                    <i class="fa-solid fa-book me-2 mb-1"></i>
                                    Справка
                                </a>
                            </li>
                            <li class="nav-item goodlink">
                                <button data-bs-toggle="modal" data-bs-target="#supportModal" id="supportLink"
                                        class="nav-link link-body-emphasis" style="cursor: pointer">
                                    <i class="fa-solid fa-headphones me-2 mb-1"></i>
                                    Поддержка
                                </button>
                            </li>
                        </ul>
                        <hr>
                        <div class="dropdown">
                            <a href="/logout"
                               class="d-flex align-items-center link-body-emphasis text-decoration-none">
                                <strong>Выйти из аккаунта</strong>
                            </a>
                        </div>
                    </div>
                </div>

                <script>

                    if (window.location.href.includes("focusmain")) {
                        hideCards()
                        uncolor()
                        document.getElementById('main').style.display = "block";
                        document.getElementById('mainLink').className = "nav-link active"
                    }

                    if (window.location.href.includes("focusquiz")) {
                        hideCards()
                        uncolor()
                        document.getElementById('ask').style.display = "block";
                        document.getElementById('askLink').className = "nav-link active"
                    }

                    if (window.location.href.includes("focusresult")) {
                        hideCards()
                        uncolor()
                        document.getElementById('result').style.display = "block";
                        document.getElementById('resultLink').className = "nav-link active"
                    }

                    if (window.location.href.includes("focussettings")) {
                        hideCards()
                        uncolor()
                        document.getElementById('settings').style.display = "block";
                        document.getElementById('settingsLink').className = "nav-link active"
                    }

                    if (window.location.href.includes("focusshare")) {
                        hideCards()
                        uncolor()
                        document.getElementById('share').style.display = "block";
                        document.getElementById('shareLink').className = "nav-link active"
                    }

                    if (window.location.href.includes("#")) {
                        showLiveToast()
                    }

                    function copyQuizLink(text) {
                        navigator.clipboard.writeText(text);
                        alert("Ссылка на квиз успешно скопирована в буфер обмена!")
                    }

                    function copyQuizNum(num) {
                        navigator.clipboard.writeText(num);
                        alert("Номер квиза успешно скопирован в буфер обмена!")
                    }

                    function showLiveToast() {
                        const toastLiveExample = document.getElementById('liveToast')
                        const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample)
                        toastBootstrap.show()
                    }

                    function showSettings() {
                        document.getElementById('set').style.display = "block"
                        document.getElementById('setButton').style.display = "none"
                    }

                    function uncolor() {
                        document.getElementById('mainMenuLink').className = "nav-link link-body-emphasis"
                        document.getElementById('cardQuizLink').className = "nav-link link-body-emphasis"
                        document.getElementById('pricingLink').className = "nav-link link-body-emphasis"
                        document.getElementById('groupsLink').className = "nav-link link-body-emphasis"
                        document.getElementById('boxLink').className = "nav-link link-body-emphasis"
                        document.getElementById('cloudLink').className = "nav-link link-body-emphasis"
                        document.getElementById('tutorialLink').className = "nav-link link-body-emphasis"
                        document.getElementById('supportLink').className = "nav-link link-body-emphasis"
                    }

                    function hideCards() {
                        document.getElementById('mainMenu').style.display = "none"
                        document.getElementById('cardQuiz').style.display = "none"
                        document.getElementById('pricing').style.display = "none"
                        document.getElementById('groups').style.display = "none"
                        document.getElementById('box').style.display = "none"
                    }

                    function showMainMenu() {
                        window.location.href = "/constructor?focusmain"
                    }

                    function showCardQuiz() {
                        window.location.href = "/constructor?focusquiz"
                    }

                    function showPricing() {
                        window.location.href = "/constructor?focusprice"
                    }

                    function showGroups() {
                        window.location.href = "/constructor?focusgroup"
                    }

                    function showBox() {
                        window.location.href = "/constructor?focusbox"
                    }
                </script>

                <div class="col-md-9">
                    <div id="mainMenu">
                        <div class="container col-xxl-11">
                            <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
                                <div class="col-10 col-sm-8 col-lg-6">
                                    <img src="https://img.freepik.com/free-vector/teacher-concept-illustration_114360-1638.jpg"
                                         class="d-block mx-lg-auto img-fluid"
                                         alt="Bootstrap Themes" width="700" height="500" loading="lazy">
                                </div>
                                <div class="col-lg-6">
                                    <h4 class="display-6 fw-bold text-body-emphasis mb-3">
                                        Новая и удобная учительская
                                    </h4>
                                    <p class="lead">
                                        Теперь все стало удобнее. Интерфейс стал приятнее и информацию находить намного
                                        проще.
                                    </p>
                                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                                        <button onclick="showCardQuiz()" type="button"
                                                class="btn btn-primary btn-lg px-4 me-md-2">
                                            К квизам
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="cardQuiz" style="display: none">
                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title">
                                    Вы используете {{ user.used }} из {{ user.limit }}<br>
                                </h5>
                                <p class="card-text">
                                    {% if user.used|int >= user.limit|int %}
                                        У вас закончились квизы. Вы можете приобрести их в разделе "Покупки"
                                    {% else %}
                                        Если захотите расширить лимит квизов - заходите в раздел "Покупки"
                                    {% endif %}
                                </p>
                                {% if user.used|int >= user.limit|int %}
                                    <div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0"
                                         aria-valuemax="100">
                                        <div class="progress-bar bg-danger"
                                             style="width: {{ (user.used / user.limit) * 100 }}%">
                                        </div>
                                    </div>
                                {% else %}
                                    <div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0"
                                         aria-valuemax="100">
                                        <div class="progress-bar bg-success"
                                             style="width: {{ (user.used / user.limit) * 100 }}%">
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        {% if user.limit_pro > 0 %}
                            <div class="card mb-3 rounded-4 border-0" id="gradient" style="color: white">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="fa-solid fa-crown"></i>
                                        Pro-опции
                                    </h5>
                                    <p class="card-text">
                                        У вас осталось еще {{ user.limit_pro - user.used_pro }} дополнительных опций
                                    </p>
                                </div>
                            </div>
                        {% else %}
                            <div class="card mb-3 rounded-4 border-0" id="gradient" style="color: white">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="fa-solid fa-crown"></i>
                                        Pro-опции
                                    </h5>
                                    <p class="card-text">
                                        У вас нет дополнительных опций
                                    </p>
                                </div>
                            </div>
                        {% endif %}

                        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
                        <script>
                            var colors = new Array(
                                [62, 35, 255],
                                [60, 255, 60],
                                [255, 35, 98],
                                [45, 175, 230],
                                [255, 0, 255],
                                [255, 128, 0]);

                            var step = 0;
                            //color table indices for:
                            // current color left
                            // next color left
                            // current color right
                            // next color right
                            var colorIndices = [0, 1, 2, 3];

                            //transition speed
                            var gradientSpeed = 0.002;

                            function updateGradient() {

                                if ($ === undefined) return;

                                var c0_0 = colors[colorIndices[0]];
                                var c0_1 = colors[colorIndices[1]];
                                var c1_0 = colors[colorIndices[2]];
                                var c1_1 = colors[colorIndices[3]];

                                var istep = 1 - step;
                                var r1 = Math.round(istep * c0_0[0] + step * c0_1[0]);
                                var g1 = Math.round(istep * c0_0[1] + step * c0_1[1]);
                                var b1 = Math.round(istep * c0_0[2] + step * c0_1[2]);
                                var color1 = "rgb(" + r1 + "," + g1 + "," + b1 + ")";

                                var r2 = Math.round(istep * c1_0[0] + step * c1_1[0]);
                                var g2 = Math.round(istep * c1_0[1] + step * c1_1[1]);
                                var b2 = Math.round(istep * c1_0[2] + step * c1_1[2]);
                                var color2 = "rgb(" + r2 + "," + g2 + "," + b2 + ")";

                                $('#gradient').css({
                                    background: "-webkit-gradient(linear, left top, right top, from(" + color1 + "), to(" + color2 + "))"
                                }).css({
                                    background: "-moz-linear-gradient(left, " + color1 + " 0%, " + color2 + " 100%)"
                                });

                                step += gradientSpeed;
                                if (step >= 1) {
                                    step %= 1;
                                    colorIndices[0] = colorIndices[1];
                                    colorIndices[2] = colorIndices[3];

                                    //pick two new target color indices
                                    //do not pick the same as the current one
                                    colorIndices[1] = (colorIndices[1] + Math.floor(1 + Math.random() * (colors.length - 1))) % colors.length;
                                    colorIndices[3] = (colorIndices[3] + Math.floor(1 + Math.random() * (colors.length - 1))) % colors.length;

                                }
                            }

                            setInterval(updateGradient, 10);
                        </script>

                        {% if user.used|int < user.limit|int %}
                            <div class="btn-group" role="group" aria-label="Basic outlined example" style="width: 100%">
                                <a href="/constructor/create/web" type="button" class="btn btn-outline-primary">
                                    Классик
                                </a>
                                <a href="/constructor/create/bee" type="button" class="btn btn-outline-primary">
                                    Гонка
                                </a>
                            </div>
                        {% endif %}

                        <div class="list-group mt-3">
                            {% for q in quiz %}
                                {% if q.author == auth %}
                                    <a href="/constructor/{{ q.id }}" class="list-group-item list-group-item-action">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h5 class="mb-1">{{ q.title }}</h5>
                                            <small class="text-body-secondary">{{ q.id }}</small>
                                        </div>
                                        <p class="mb-1">{{ q.text }}</p>
                                        <small class="text-body-secondary">{{ q.test|length }} вопросов</small>
                                    </a>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>

                    <div id="pricing" style="display: none">

                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fa-solid fa-shop"></i>
                                    Покупки
                                </h5>
                                <p class="card-text">
                                    Вы можете купить любое количество квизов или дополнительных Премьер-опций. Чем
                                    больше покупаете - тем меньше платите. А сэкономить до 30% можно с покупкой комбо.
                                </p>

                                <hr>

                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <h5>Шаблоны для квизов</h5>
                                        <ul class="list-group w-100">
                                            <li class="list-group-item">
                                                От 1 квиза - 14,5₽/квиз
                                            </li>
                                            <li class="list-group-item">
                                                От 10 квизов - 12,5₽/квиз
                                            </li>
                                            <li class="list-group-item">
                                                От 25 квизов - 10,5₽/квиз
                                            </li>
                                            <li class="list-group-item">
                                                От 50 квизов - 8,5₽/квиз
                                            </li>
                                        </ul>
                                        <form action="/payment/kolvo/classic" method="post">
                                            <label class="form-label mt-3">
                                                Количество
                                            </label>
                                            <input name="kolvo" type="number" class="form-control"
                                                   placeholder="Шаблоны для квизов"/>
                                            <button type="submit" class="btn btn-primary mt-3">
                                                Рассчитать
                                            </button>
                                        </form>
                                    </div>
                                    <div class="col-md-6">
                                        <h5>Premier опции:</h5>
                                        <ul class="list-group w-100">
                                            <li class="list-group-item">
                                                От 1 опции - 13,5₽/опция
                                            </li>
                                            <li class="list-group-item">
                                                От 10 опций - 11,5₽/опция
                                            </li>
                                            <li class="list-group-item">
                                                От 25 опций - 9,5₽/опция
                                            </li>
                                            <li class="list-group-item">
                                                От 50 опций - 7,5₽/опция
                                            </li>
                                        </ul>
                                        <form action="/payment/kolvo/premier" method="post">
                                            <label class="form-label mt-3">
                                                Количество
                                            </label>
                                            <input name="kolvo" type="number" class="form-control"
                                                   placeholder="Premier-опции"/>
                                            <button type="submit" class="btn btn-primary mt-3">
                                                Рассчитать
                                            </button>
                                        </form>
                                    </div>
                                </div>


                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            Комбо "Мини"
                                        </h5>
                                        <p class="card-text">
                                            <span class="badge rounded-pill text-bg-danger">
                                                Экономия 10%
                                            </span>
                                        </p>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">15 шаблонов для квизов</li>
                                        <li class="list-group-item">15 опций Premier</li>
                                    </ul>
                                    <div class="card-body">
                                        <h2>324 руб</h2>
                                        <a href="/payment/combo/1" class="card-link">Оформить</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            Комбо "Миди"
                                        </h5>
                                        <p class="card-text">
                                            <span class="badge rounded-pill text-bg-danger">
                                                Экономия 20%
                                            </span>
                                        </p>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">30 шаблонов для квизов</li>
                                        <li class="list-group-item">30 опций Premier</li>
                                    </ul>
                                    <div class="card-body">
                                        <h2>480 руб</h2>
                                        <a href="/payment/combo/2" class="card-link">Оформить</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            Комбо "Макси"
                                        </h5>
                                        <p class="card-text">
                                            <span class="badge rounded-pill text-bg-danger">
                                                Экономия 30%
                                            </span>
                                        </p>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">60 шаблонов для квизов</li>
                                        <li class="list-group-item">60 опций Premier</li>
                                    </ul>
                                    <div class="card-body">
                                        <h2>672 руб</h2>
                                        <a href="/payment/combo/3" class="card-link">Оформить</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="groups" style="display: none">
                        <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal"
                                data-bs-target="#createGroupModal" style="width: 100%">
                            Создать группу
                        </button>

                        <div class="row g-3 mt-1">
                            {% for g in groups %}
                                {% if g.author == auth %}
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">{{ g.title }}</h5>
                                                <h6 class="card-subtitle mb-2 text-body-secondary">Группа создана
                                                    вами</h6>
                                                <p class="card-text">
                                                    Перейдите в группу для управления
                                                </p>
                                                <hr>
                                                <a href="/group/{{ g.id }}" class="btn btn-primary">Открыть</a>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>

                        <div class="modal fade" id="createGroupModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                             aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Создать новую группу</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form action="/group/create" method="post">
                                            <label class="form-label">Введите название группы</label>
                                            <input name="title" type="text" class="form-control"/>
                                            <button class="btn btn-primary mt-3" type="submit">Создать</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="box" style="display: none">
                        {% for b in bank %}
                            <div class="card mb-3">
                                <div class="card-header">
                                    {% set typi = "Текст" %}
                                    {% if b.type == "text" %}
                                        {% set typi = "Текстовый ответ" %}
                                    {% elif b.type == "choice" %}
                                        {% set typi = "Выбор ответа" %}
                                    {% elif b.type == "after_check" %}
                                        {% set typi = "Ответ с проверкой" %}
                                    {% elif b.type == "python_code" %}
                                        {% set typi = "Код на Python" %}
                                    {% elif b.type == "cross" %}
                                        {% set typi = "Кроссплатформенный" %}
                                    {% endif %}
                                    ID: <b>{{ b.id }}</b>, {{ typi }}
                                </div>
                                <div class="card-body">
                                    {{ b.text | safe }}
                                    <hr>
                                    <a href="/bank/del/{{ b.id }}" class="btn btn-danger">Удалить</a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>

                    <div class="modal fade" id="supportModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Служба поддержки</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form action="/support/send" method="post">
                                        <label class="form-label">С чем нужна помощь?</label>
                                        <textarea class="form-control" name="text"
                                                  placeholder="Опишите все очень подробно"
                                                  rows="3"></textarea>
                                        <button class="btn btn-primary mt-3" type="submit">
                                            Отправить
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal fade" id="priceModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Отдел продаж</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form action="/sales/send" method="post">
                                        <label class="form-label">Выберите позицию:</label>
                                        <select name="type" class="form-select mb-3"
                                                aria-label="Default select example">
                                            <option>Покупка квизов</option>
                                            <option>Покупка Protect</option>
                                        </select>

                                        <label class="form-label">Количество:</label>
                                        <input name="kolvo" type="number" class="form-control mb-3">

                                        <label class="form-label">Комментарий:</label>
                                        <textarea class="form-control" name="text"
                                                  placeholder="Напишите подробно цели использования квизов/опций"
                                                  rows="3"></textarea>

                                        <button class="btn btn-primary mt-3" type="submit">
                                            Отправить
                                        </button>

                                        <hr>

                                        <div class="alert alert-warning" role="alert">
                                            В течении одного рабочего дня с вами свяжется сотрудник отдела продаж и
                                            уточнит все детали
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- LINE -->

                    <div style="display: none">
                        <div class="alert alert-primary" role="alert">
                            <h4 class="alert-heading">QuokkaCloud</h4>
                            <p>Пространство для хранения файлов, фотографий и отчетов</p>
                            <a href="https://cloud.quokkaquiz.ru/login?email={{ user.mail }}&password={{ user.password }}"
                               target="_blank" type="button" class="btn btn-primary">
                                Открыть
                            </a>
                        </div>

                        <hr class="mt-0">

                        <div class="card">
                            <div class="card-body">
                                {% if user.used / user.limit > 0.5 %}
                                    <h5 class="card-title">У вас осталось мало квизов</h5>
                                {% else %}
                                    <h5 class="card-title">У вас еще есть квизы</h5>
                                {% endif %}
                                <p class="card-text">Вы используете {{ user.used }} из {{ user.limit }}</p>
                                <button onclick="showPrice()" id="priceButton" class="btn btn-primary">Увеличить лимиты
                                </button>
                                <div style="display: none" id="price" class="mt-3">
                                    <div class="row g-3">
                                        <div class="col-md-3">
                                            <div class="card">
                                                <div class="card-body">
                                                    <center>
                                                        <h1 class="card-title">150₽</h1>
                                                        <p class="card-text">
                                                            + 10 квизов
                                                            <br>
                                                            <span class="badge rounded-pill text-bg-secondary mt-2">
                                                    15₽ /квиз
                                                </span>
                                                        </p>
                                                        <hr>
                                                        <a href="https://self.payanyway.ru/17079905812337"
                                                           class="btn btn-primary"
                                                           target="_blank">
                                                            Купить
                                                        </a>
                                                    </center>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="card">
                                                <div class="card-body">
                                                    <center>
                                                        <h1 class="card-title">250₽</h1>
                                                        <p class="card-text">
                                                            + 20 квизов
                                                            <br>
                                                            <span class="badge rounded-pill text-bg-secondary mt-2">
                                                    12.5₽ /квиз
                                                </span>
                                                        </p>
                                                        <hr>
                                                        <a href="https://self.payanyway.ru/17079942345487"
                                                           class="btn btn-primary"
                                                           target="_blank">
                                                            Купить
                                                        </a>
                                                    </center>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="card">
                                                <div class="card-body">
                                                    <center>
                                                        <h1 class="card-title">500₽</h1>
                                                        <p class="card-text">
                                                            + 50 квизов
                                                            <br>
                                                            <span class="badge rounded-pill text-bg-secondary mt-2">
                                                    10₽ /квиз
                                                </span>
                                                        </p>
                                                        <hr>
                                                        <a href="https://self.payanyway.ru/17079943328177"
                                                           class="btn btn-primary"
                                                           target="_blank">
                                                            Купить
                                                        </a>
                                                    </center>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="card">
                                                <div class="card-body">
                                                    <center>
                                                        <h1 class="card-title">750₽</h1>
                                                        <p class="card-text">
                                                            + 100 квизов
                                                            <br>
                                                            <span class="badge rounded-pill text-bg-secondary mt-2">
                                                    7.5₽ /квиз
                                                </span>
                                                        </p>
                                                        <hr>
                                                        <a href="https://self.payanyway.ru/17079944520456"
                                                           class="btn btn-primary"
                                                           target="_blank">
                                                            Купить
                                                        </a>
                                                    </center>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-text mt-3">
                                        Покупая квизы, вы принимаете пользовательское соглашение о
                                        <a target="_blank" href="https://law.quokkaquiz.ru/purchase">покупке</a>
                                        квизов
                                    </div>
                                    <div class="alert alert-light mt-3 mb-2" role="alert">
                                        Если вы хотите создать индивидуальный тариф - напишите об этом на почту
                                        sales@quokkaquiz.ru
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Калькулятор стоимости</h5>
                                            <p class="card-text">
                                                Можете подобрать тариф под себя
                                            </p>
                                            <label class="form-label">Кол-во квизов</label>
                                            <input onchange="calcQuizPrice()" type="range" class="form-range" min="1"
                                                   max="100"
                                                   id="quizRange">
                                            <h5 class="card-title" id="quizPrice"></h5>
                                            <a style="display: none;" id="payLink" target="_blank">Купить</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="card text-bg-warning mt-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Банк вопросов</h5>
                                        <p class="card-text">
                                            Храните здесь свои вопросы и по необходимости добавляйте в квизы
                                        </p>
                                        <a href="/bank" type="button" class="btn btn-dark">Открыть</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card text-bg-success mt-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Группы учеников</h5>
                                        <p class="card-text">
                                            Управляйте группами, проверяйте задания и присылайте отчеты
                                        </p>
                                        <a href="/group" type="button" class="btn btn-light">Открыть</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <div class="btn-group" role="group">
                            <a href="/" type="button" class="btn btn-outline-primary">Главная</a>
                            <a href="/logout" type="button" class="btn btn-outline-primary">Выйти из аккаунта</a>
                            <button data-bs-toggle="modal" data-bs-target="#supportModal" type="button"
                                    class="btn btn-outline-primary">Поддержка
                            </button>
                        </div>

                        <hr>

                        <div class="list-group mt-3">
                            {% for q in quiz %}
                                {% if q.author == auth %}
                                    <a href="/constructor/{{ q.id }}" class="list-group-item list-group-item-action">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h5 class="mb-1">{{ q.title }}</h5>
                                            <small class="text-body-secondary">{{ q.id }}</small>
                                        </div>
                                        <p class="mb-1">{{ q.text }}</p>
                                        <small class="text-body-secondary">{{ q.test|length }} вопросов</small>
                                    </a>
                                {% endif %}
                            {% endfor %}
                        </div>

                        <hr>

                        {% if user.used >= user.limit %}
                            <div class="alert alert-warning" role="alert">
                                Вы превысили лимит квизов. Чтобы создать новый квиз - удалите предыдущий или купите их
                            </div>
                        {% else %}
                            <div class="card" style="margin-bottom: 100px">
                                <div class="card-body">
                                    <h5 class="card-title mb-3">Создать квиз</h5>
                                    <a href="/constructor/create/web" type="button" class="btn btn-primary">
                                        Для сайта
                                    </a>
                                    <a href="/constructor/create/cross" type="button" class="btn btn-primary">
                                        Кросс
                                    </a>
                                    <a href="/constructor/create/bee" type="button" class="btn btn-primary">
                                        Пчелки
                                    </a>
                                    <hr>

                                    <h5 class="card-title mb-3">Отличия типов:</h5>
                                    <ul class="mb-0">
                                        <li>
                                            <b>Для сайта</b> - самый многофункциональный тип квиза, работает только на
                                            сайте
                                            и
                                            без ограничений
                                        </li>
                                        <li>
                                            <b>Кросс</b> - квиз только с текстовым ответом, работает на сайте, в
                                            приложении
                                            и в
                                            боте
                                        </li>
                                        <li>
                                            <b>Пчелки</b> - точно такой же квиз, как и "Для сайта", только можно онлайн
                                            наблюдать за прогрессом учащихся
                                        </li>
                                    </ul>

                                </div>
                            </div>
                        {% endif %}


                    </div>
                </div>
            </div>


            <script>
                if (window.location.href.includes("?focusmain")) {
                    hideCards()
                    uncolor()
                    document.getElementById('mainMenu').style.display = "block";
                    document.getElementById('mainMenuLink').className = "nav-link active"
                }

                if (window.location.href.includes("?focusquiz")) {
                    hideCards()
                    uncolor()
                    document.getElementById('cardQuiz').style.display = "block";
                    document.getElementById('cardQuizLink').className = "nav-link active"
                }

                if (window.location.href.includes("?focusgroup")) {
                    hideCards()
                    uncolor()
                    document.getElementById('groups').style.display = "block";
                    document.getElementById('groupsLink').className = "nav-link active"
                }

                if (window.location.href.includes("?focusbox")) {
                    hideCards()
                    uncolor()
                    document.getElementById('box').style.display = "block";
                    document.getElementById('boxLink').className = "nav-link active"
                }

                if (window.location.href.includes("?focusprice")) {
                    hideCards()
                    uncolor()
                    document.getElementById('pricing').style.display = "block";
                    document.getElementById('pricingLink').className = "nav-link active"
                }

                function showPrice() {
                    document.getElementById('priceButton').style.display = "none"
                    document.getElementById('price').style.display = "block"
                }

                function calcQuizPrice() {
                    var price = 1
                    var val = parseInt(document.getElementById('quizRange').value)
                    if (val <= 15) {
                        price = val * 15
                    } else if (val > 15 && val <= 30) {
                        price = val * 12
                    } else if (val > 31 && val <= 50) {
                        price = val * 10
                    } else if (val > 50 && val <= 75) {
                        price = val * 8
                    } else if (val > 75 && val <= 100) {
                        price = val * 6
                    }
                    var word = trueWord(price)
                    document.getElementById('quizPrice').innerHTML = `Стоимость ~ ${price} ₽ за ${val} ${word}`
                }

                function trueWord(s) {
                    var n1 = "квизов"
                    var n2 = "квиз"
                    var n3 = "квиза"
                    if (s === 0) {
                        return n1
                    } else if (s % 100 >= 10 && s % 100 <= 20) {
                        return n1
                    } else if (s % 10 === 1) {
                        return n2
                    } else if (s % 10 >= 2 && s % 10 <= 4) {
                        return n3
                    } else {
                        return n1
                    }
                }
            </script>


        </div>
    </div>
</div>

</body>
</html>